{"version":3,"sources":["../../src/pages/perfil/perfil.module.ts","../../src/pages/perfil/perfil.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PerfilPage } from './perfil';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PerfilPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PerfilPage),\r\n  ],\r\n})\r\nexport class PerfilPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, AlertController, ModalController } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ServicesProvider } from '../../providers/services/services';\r\nimport { Http, Headers, RequestOptions } from '@angular/http';\r\n\r\n/**\r\n * Generated class for the PerfilPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-perfil',\r\n  templateUrl: 'perfil.html',\r\n})\r\nexport class PerfilPage {\r\n\r\n  nombre: string;\r\n  telefono: string;\r\n  id: string;\r\n  formRegister: FormGroup;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController,\r\n    private alertCtrl: AlertController, public formBuilder: FormBuilder, public services: ServicesProvider,\r\n    public http: Http, public modalCtrl: ModalController) {\r\n    this.formRegister = this.createRegisterForm();\r\n    this.id = this.services.getCookie(\"usuario\");\r\n    this.nombre = this.services.getCookie(\"nombre\");\r\n    this.telefono = this.services.getCookie(\"telefono\");\r\n    if (this.telefono == 'undefine') {\r\n      this.telefono = \"\";\r\n    }\r\n  }\r\n\r\n  dismiss() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  createRegisterForm() {\r\n    return this.formBuilder.group({\r\n      nombre: ['', [Validators.required, Validators.pattern('^([A-Za-záéíóú ])+$')]],\r\n      telefono: ['', [Validators.pattern('^([4]{1}[0-9]{6})$|^([6-7]{1}[0-9]{7})$')]]\r\n    })\r\n  }\r\n\r\n  editarUsuario() {\r\n    var usuario = {\r\n      id: this.id, nombreCompleto: this.nombre, telefono: this.telefono\r\n    };\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'text/plain');\r\n    let options = new RequestOptions({ headers: headers });\r\n    this.http.post(this.services.URLGlobal + 'Usuario/EditarDatos?idUsuario=' + usuario.id + '&nombreCompleto=' + usuario.nombreCompleto +\r\n      '&telefono=' + usuario.telefono, usuario, options)\r\n      .subscribe(data => {\r\n        if (data.json().succes == true) {\r\n          let alert = this.alertCtrl.create({\r\n            title: 'Datos modificados',\r\n            subTitle: 'Los datos se modificaron correctamente',\r\n            buttons: [{\r\n              text: 'Aceptar',\r\n              handler: () => {\r\n                this.dismiss();\r\n              }\r\n            }]\r\n          });\r\n          alert.present();\r\n          document.cookie = \"nombre\" + \"=\" + usuario.nombreCompleto;\r\n          document.cookie = \"telefono\" + \"=\" + usuario.telefono;\r\n          this.navCtrl.push('IniciativasPage');\r\n        } else {\r\n          const alert = this.alertCtrl.create({\r\n            title: 'Error',\r\n            subTitle: 'Error al modificar los datos, verique los campos y vuelva a intentarlo.',\r\n            buttons: ['Aceptar']\r\n          });\r\n          alert.present();\r\n        }\r\n\r\n      }, error => {\r\n        console.log(error);\r\n        const alert = this.alertCtrl.create({\r\n          title: 'Error',\r\n          subTitle: 'Error al modificar los datos, consulte con el personal de sistemas.',\r\n          buttons: ['Aceptar']\r\n        });\r\n        alert.present();\r\n      });\r\n  }\r\n\r\n  cambiarContrasena() {\r\n    let profileModal = this.modalCtrl.create('CambiarContrasenaPage');\r\n    profileModal.present();\r\n    this.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.ts"],"sourceRoot":""}